[supervisord]
nodaemon=true
logfile=/var/log/supervisor/supervisord.log
pidfile=/ultrarag/run/supervisor/supervisord.pid
childlogdir=/var/log/supervisor

[unix_http_server]
file=/ultrarag/run/supervisor/supervisor.sock
chmod=0700

[supervisorctl]
serverurl=unix:///ultrarag/run/supervisor/supervisor.sock

[rpcinterface:supervisor]
supervisor.rpcinterface_factory = supervisor.rpcinterface:make_main_rpcinterface

[program:health-server]
command=/opt/miniconda/envs/ultrarag/bin/python /ultrarag/health_server.py
directory=/ultrarag
environment=HEALTH_PORT=8080,HEALTH_HOST=0.0.0.0
autostart=true
autorestart=true
startretries=3
stderr_logfile=/var/log/supervisor/health-server.err.log
stdout_logfile=/var/log/supervisor/health-server.out.log
user=ultrarag

[program:retriever-server]
command=/opt/miniconda/envs/ultrarag/bin/python /ultrarag/servers/retriever/src/retriever.py --transport http --port 8002
directory=/ultrarag
environment=PYTHONPATH="/ultrarag/src:/ultrarag"
autostart=true
autorestart=true
startretries=3
stderr_logfile=/var/log/supervisor/retriever.err.log
stdout_logfile=/var/log/supervisor/retriever.out.log
user=ultrarag

[program:retriever-proxy]
command=/opt/miniconda/envs/ultrarag/bin/uvicorn servers.auth_proxy.app:app --host 0.0.0.0 --port 8100
directory=/ultrarag
environment=PYTHONPATH="/ultrarag/src:/ultrarag",UPSTREAM_URL="http://127.0.0.1:8002/mcp"
autostart=true
autorestart=true
startretries=3
stderr_logfile=/var/log/supervisor/retriever-proxy.err.log
stdout_logfile=/var/log/supervisor/retriever-proxy.out.log
user=ultrarag

[program:generation-server]
command=/opt/miniconda/envs/ultrarag/bin/python /ultrarag/servers/generation/src/generation.py --transport http --port 8003
directory=/ultrarag
environment=PYTHONPATH="/ultrarag/src:/ultrarag"
autostart=true
autorestart=true
startretries=3
stderr_logfile=/var/log/supervisor/generation.err.log
stdout_logfile=/var/log/supervisor/generation.out.log
user=ultrarag

[program:generation-proxy]
command=/opt/miniconda/envs/ultrarag/bin/uvicorn servers.auth_proxy.app:app --host 0.0.0.0 --port 8101
directory=/ultrarag
environment=PYTHONPATH="/ultrarag/src:/ultrarag",UPSTREAM_URL="http://127.0.0.1:8003/mcp"
autostart=true
autorestart=true
startretries=3
stderr_logfile=/var/log/supervisor/generation-proxy.err.log
stdout_logfile=/var/log/supervisor/generation-proxy.out.log
user=ultrarag

[program:corpus-server]
command=/opt/miniconda/envs/ultrarag/bin/python /ultrarag/servers/corpus/src/corpus.py --transport http --port 8004
directory=/ultrarag
environment=PYTHONPATH="/ultrarag/src:/ultrarag"
autostart=true
autorestart=true
startretries=3
stderr_logfile=/var/log/supervisor/corpus.err.log
stdout_logfile=/var/log/supervisor/corpus.out.log
user=ultrarag

[program:corpus-proxy]
command=/opt/miniconda/envs/ultrarag/bin/uvicorn servers.auth_proxy.app:app --host 0.0.0.0 --port 8102
directory=/ultrarag
environment=PYTHONPATH="/ultrarag/src:/ultrarag",UPSTREAM_URL="http://127.0.0.1:8004/mcp"
autostart=true
autorestart=true
startretries=3
stderr_logfile=/var/log/supervisor/corpus-proxy.err.log
stdout_logfile=/var/log/supervisor/corpus-proxy.out.log
user=ultrarag

[program:reranker-server]
command=/opt/miniconda/envs/ultrarag/bin/python /ultrarag/servers/reranker/src/reranker.py --transport http --port 8005
directory=/ultrarag
environment=PYTHONPATH="/ultrarag/src:/ultrarag"
autostart=true
autorestart=true
startretries=3
stderr_logfile=/var/log/supervisor/reranker.err.log
stdout_logfile=/var/log/supervisor/reranker.out.log
user=ultrarag

[program:reranker-proxy]
command=/opt/miniconda/envs/ultrarag/bin/uvicorn servers.auth_proxy.app:app --host 0.0.0.0 --port 8103
directory=/ultrarag
environment=PYTHONPATH="/ultrarag/src:/ultrarag",UPSTREAM_URL="http://127.0.0.1:8005/mcp"
autostart=true
autorestart=true
startretries=3
stderr_logfile=/var/log/supervisor/reranker-proxy.err.log
stdout_logfile=/var/log/supervisor/reranker-proxy.out.log
user=ultrarag

[program:evaluation-server]
command=/opt/miniconda/envs/ultrarag/bin/python /ultrarag/servers/evaluation/src/evaluation.py --transport http --port 8006
directory=/ultrarag
environment=PYTHONPATH="/ultrarag/src:/ultrarag"
autostart=true
autorestart=true
startretries=3
stderr_logfile=/var/log/supervisor/evaluation.err.log
stdout_logfile=/var/log/supervisor/evaluation.out.log
user=ultrarag

[program:evaluation-proxy]
command=/opt/miniconda/envs/ultrarag/bin/uvicorn servers.auth_proxy.app:app --host 0.0.0.0 --port 8104
directory=/ultrarag
environment=PYTHONPATH="/ultrarag/src:/ultrarag",UPSTREAM_URL="http://127.0.0.1:8006/mcp"
autostart=true
autorestart=true
startretries=3
stderr_logfile=/var/log/supervisor/evaluation-proxy.err.log
stdout_logfile=/var/log/supervisor/evaluation-proxy.out.log
user=ultrarag

[program:benchmark-server]
command=/opt/miniconda/envs/ultrarag/bin/python /ultrarag/servers/benchmark/src/benchmark.py --transport http --port 8007
directory=/ultrarag
environment=PYTHONPATH="/ultrarag/src:/ultrarag"
autostart=true
autorestart=true
startretries=3
stderr_logfile=/var/log/supervisor/benchmark.err.log
stdout_logfile=/var/log/supervisor/benchmark.out.log
user=ultrarag

[program:benchmark-proxy]
command=/opt/miniconda/envs/ultrarag/bin/uvicorn servers.auth_proxy.app:app --host 0.0.0.0 --port 8105
directory=/ultrarag
environment=PYTHONPATH="/ultrarag/src:/ultrarag",UPSTREAM_URL="http://127.0.0.1:8007/mcp"
autostart=true
autorestart=true
startretries=3
stderr_logfile=/var/log/supervisor/benchmark-proxy.err.log
stdout_logfile=/var/log/supervisor/benchmark-proxy.out.log
user=ultrarag

[program:custom-server]
command=/opt/miniconda/envs/ultrarag/bin/python /ultrarag/servers/custom/src/custom.py --transport http --port 8008
directory=/ultrarag
environment=PYTHONPATH="/ultrarag/src:/ultrarag"
autostart=true
autorestart=true
startretries=3
stderr_logfile=/var/log/supervisor/custom.err.log
stdout_logfile=/var/log/supervisor/custom.out.log
user=ultrarag

[program:custom-proxy]
command=/opt/miniconda/envs/ultrarag/bin/uvicorn servers.auth_proxy.app:app --host 0.0.0.0 --port 8106
directory=/ultrarag
environment=PYTHONPATH="/ultrarag/src:/ultrarag",UPSTREAM_URL="http://127.0.0.1:8008/mcp"
autostart=true
autorestart=true
startretries=3
stderr_logfile=/var/log/supervisor/custom-proxy.err.log
stdout_logfile=/var/log/supervisor/custom-proxy.out.log
user=ultrarag

[program:prompt-server]
command=/opt/miniconda/envs/ultrarag/bin/python /ultrarag/servers/prompt/src/prompt.py --transport http --port 8009
directory=/ultrarag
environment=PYTHONPATH="/ultrarag/src:/ultrarag"
autostart=true
autorestart=true
startretries=3
stderr_logfile=/var/log/supervisor/prompt.err.log
stdout_logfile=/var/log/supervisor/prompt.out.log
user=ultrarag

[program:prompt-proxy]
command=/opt/miniconda/envs/ultrarag/bin/uvicorn servers.auth_proxy.app:app --host 0.0.0.0 --port 8107
directory=/ultrarag
environment=PYTHONPATH="/ultrarag/src:/ultrarag",UPSTREAM_URL="http://127.0.0.1:8009/mcp"
autostart=true
autorestart=true
startretries=3
stderr_logfile=/var/log/supervisor/prompt-proxy.err.log
stdout_logfile=/var/log/supervisor/prompt-proxy.out.log
user=ultrarag

[program:router-server]
command=/opt/miniconda/envs/ultrarag/bin/python /ultrarag/servers/router/src/router.py --transport http --port 8010
directory=/ultrarag
environment=PYTHONPATH="/ultrarag/src:/ultrarag"
autostart=true
autorestart=true
startretries=3
stderr_logfile=/var/log/supervisor/router.err.log
stdout_logfile=/var/log/supervisor/router.out.log
user=ultrarag

[program:router-proxy]
command=/opt/miniconda/envs/ultrarag/bin/uvicorn servers.auth_proxy.app:app --host 0.0.0.0 --port 8108
directory=/ultrarag
environment=PYTHONPATH="/ultrarag/src:/ultrarag",UPSTREAM_URL="http://127.0.0.1:8010/mcp"
autostart=true
autorestart=true
startretries=3
stderr_logfile=/var/log/supervisor/router-proxy.err.log
stdout_logfile=/var/log/supervisor/router-proxy.out.log
user=ultrarag
